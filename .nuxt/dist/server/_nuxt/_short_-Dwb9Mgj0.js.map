{"version":3,"file":"_short_-Dwb9Mgj0.js","sources":["../../../../pages/anonmes/[short].vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"container\">\n            <h2 class=\"text-black text-2xl mx-1 font-extrabold  relative inline-block stroke-current\">üíÅ AnonMess: {{\n                anlink.author }} <svg class=\"absolute-bottom-0.5 w-full max-h-1.5\" viewBox=\"0 0 55 5\"\n                    xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"none\">\n                    <path d=\"M0.652466 4.00002C15.8925 2.66668 48.0351 0.400018 54.6853 2.00002\" strokeWidth=\"2\"></path>\n                </svg></h2>\n            <p>\n                AnonMess is a simple anonymous messaging app that allows other people to send messages to you without\n                revealing identity.\n            </p>\n            <div class=\"bg-blue-300 p-2 text-black m-2\">\n                Send your anonymous message to <b class=\"text-black\">{{ anlink.author }}</b> by writing in the\n                box below !\n            </div>\n\n            <div class=\"w-full md:w-2/3 mx-auto\">\n                <div class=\"bg-green-300 p-2 text-black m-2\" v-if=\"isSuccessful\">\n                    Message sent successfully !\n                </div>\n\n                <form @submit.prevent=\"sendMessage\">\n                  \n                    <textarea\n                        class=\"p-2 border-2 border-black w-full h-28 mt-4 focus:border-gray-400 focus:shadow-md hover:border-amber-900\"\n                        v-model=\"message\" placeholder=\"Your Message\"></textarea>\n                        <br>\n                        <NuxtTurnstile v-model=\"token\" />\n                    <button class=\"mt-4 p-2 bg-black text-white  hover:bg-gray-600 w-full\" type=\"submit\">Send</button>\n                </form>\n            </div>\n\n            <hr class=\"mt-3 border-1 border-black\">\n\n            <div class=\"border-2 border-black rounded-r-xl rounded-tl-xl p-4 mt-5 bg-gradient-to-r from-slate-100 via-white to-gray-600 flex justify-between\"\n                v-for=\"(mes, i) in anonmes\" :key=\"i\">\n                <span class=\"text-black\">{{ mes.content }}</span>\n                <span class=\"text-white \">üìÜ {{ new Date(mes.createdAt).toLocaleDateString() }}</span>\n            </div>\n\n\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\n\n\nconst anonmes: any = ref([]);\nconst anlink:any = ref({});\n\nconst route = useRoute();\nconst message = ref('');\nconst token = ref('');\nconst isSuccessful = ref(false);\n\n\n\nconst getMess = async () => {\n    const res: any = await $fetch('/api/anon?method=show&short=' + route.params.short);\n    anonmes.value = res.body;\n    anlink.value = res.anlink;\n    useHead({\n    title: \"Send Anonymous message to \"+anlink.value.author+\" ! - JUSTALINKO\"\n    });\n};\n\nconst sendMessage = async () => {\n\n    if(message.value == '')\n    {\n        alert('Message cannot be empty');\n        return;\n    }\n    const res: any = await $fetch('/api/anon', {\n\n        method: \"POST\",\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: {\n            short: route.params.short,\n            message: message.value,\n            token: token.value\n        \n        }\n    });\n    if(res.statusCode == 200)\n    {\n        isSuccessful.value = true;\n        message.value = '';\n        await getMess();\n    }\n\n\n};\nonMounted(async () => {\n    await getMess();\n});\n\n\n</script>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAiDM,UAAA,UAAe,IAAI,CAAA,CAAE;AACrB,UAAA,SAAa,IAAI,CAAA,CAAE;AAEX,aAAS;AACjB,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,eAAe,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}